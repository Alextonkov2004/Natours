{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/updateSettings.js","public/js/stripe.js","public/js/signup.js","public/js/mapbox.js"],"sourcesContent":["(function () {\n/* eslint-disable */ /* eslint-disable */ /* eslint-disable */ const $9752b293a1a30209$export$516836c6a9dfc573 = ()=>{\n    const el = document.querySelector(\".alert\");\n    if (el) el.parentElement.removeChild(el);\n};\nconst $9752b293a1a30209$export$de026b00723010c1 = (type, msg)=>{\n    $9752b293a1a30209$export$516836c6a9dfc573();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div`;\n    document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\n    window.setTimeout($9752b293a1a30209$export$516836c6a9dfc573, 5000);\n};\n\n\nconst $2ce254aeaf8bb0ff$export$596d806903d1f59e = async (email, password)=>{\n    try {\n        const res = await axios({\n            method: \"POST\",\n            url: \"/api/v1/users/login\",\n            data: {\n                email: email,\n                password: password\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $9752b293a1a30209$export$de026b00723010c1)(\"success\", \"Logged in successfully!\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1500);\n        }\n    } catch (err) {\n        (0, $9752b293a1a30209$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\nconst $2ce254aeaf8bb0ff$export$a0973bcfe11b05c9 = async ()=>{\n    try {\n        const res = await axios({\n            method: \"GET\",\n            url: \"/api/v1/users/logout\"\n        });\n        if (res.data.status === \"success\") window.setTimeout(()=>{\n            location.assign(\"/\");\n        }, 1500);\n    } catch (err) {\n        (0, $9752b293a1a30209$export$de026b00723010c1)(\"error\", \"Error logging out! Try again!\");\n    }\n};\n\n\n/* eslint-disable */ \nconst $743691a89873c7ad$export$f558026a994b6051 = async (data, type)=>{\n    try {\n        const url = type === \"password\" ? \"/api/v1/users/updateMyPassword\" : \"/api/v1/users/updateMe\";\n        const res = await axios({\n            method: \"PATCH\",\n            url: url,\n            data: data\n        });\n        if (res.data.status === \"success\") (0, $9752b293a1a30209$export$de026b00723010c1)(\"success\", `${type.toUpperCase()} updated succesfully!`);\n    } catch (err) {\n        (0, $9752b293a1a30209$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\n\n\n/*eslint-disable */ \nconst $bb665e318ea0cb03$export$8d5bdbf26681c0c2 = async (tourId)=>{\n    try {\n        //1) Get checkout session from api\n        const session = await axios(`/api/v1/bookings/checkout-session/${tourId}`);\n        //console.log(session);\n        //2) Create checkout form + charge credit card\n        window.location.replace(session.data.session.url);\n    } catch (err) {\n        (0, $9752b293a1a30209$export$de026b00723010c1)(\"error\", err);\n    }\n};\n\n\n/*eslint-disable */ \nconst $66cece3b701ac6a2$export$7200a869094fec36 = async (name, email, password, passwordConfirm)=>{\n    try {\n        const res = await axios({\n            method: \"POST\",\n            url: \"/api/v1/users/signup\",\n            data: {\n                name: name,\n                email: email,\n                password: password,\n                passwordConfirm: passwordConfirm\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $9752b293a1a30209$export$de026b00723010c1)(\"success\", \"Signed up successfully\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1500);\n        }\n    } catch (err) {\n        console.log(err);\n        err.response.data.error.code = 11000;\n        {\n            const message = `${Object.keys(err.response.data.error.keyValue)} is already in use.`;\n            (0, $9752b293a1a30209$export$de026b00723010c1)(\"error\", message);\n        }\n    }\n};\n\n\n/*eslint-disable*/ const $71536770727dae28$export$4c5dd147b21b9176 = (locations, startLocation, mapToken)=>{\n    locations.push(startLocation);\n    mapboxgl.accessToken = mapToken;\n    var map = new mapboxgl.Map({\n        container: \"map\",\n        style: \"mapbox://styles/alextonkov2004/cly05dy6g003a01qp56vu0fxt\",\n        //center: [-118.155614, 33.976076],\n        //zoom: 1,\n        //interactive: true\n        scrollZoom: false\n    });\n    map.on(\"style.load\", ()=>{\n        map.setFog({});\n    });\n    const bounds = new mapboxgl.LngLatBounds();\n    locations.forEach((loc)=>{\n        const [lng, lat] = loc.coordinates;\n        //Create marker\n        const el = document.createElement(\"div\");\n        loc.day === undefined ? el.className = \"marker-orange\" : el.className = \"marker\";\n        let paragraph;\n        loc.day === undefined ? paragraph = `<p>Start: ${loc.address}</p>` : paragraph = `<p>Day ${loc.day}: ${loc.description}</p>`;\n        //Add Pop up\n        const popUp = new mapboxgl.Popup({\n            offset: 30,\n            closeButton: false,\n            closeOnClick: false\n        }).setHTML(paragraph);\n        //Add marker\n        const marker = new mapboxgl.Marker({\n            element: el,\n            anchor: \"bottom\"\n        }).setLngLat(loc.coordinates).setPopup(popUp).addTo(map);\n        const markerDiv = marker.getElement();\n        markerDiv.addEventListener(\"mouseenter\", ()=>marker.togglePopup());\n        markerDiv.addEventListener(\"mouseleave\", ()=>marker.togglePopup());\n        // Extends map bounds to include current location\n        bounds.extend([\n            lng,\n            lat\n        ]);\n    });\n    map.fitBounds(bounds, {\n        padding: {\n            top: 200,\n            bottom: 200,\n            left: 100,\n            right: 100\n        }\n    });\n};\n\n\n//DOM elements\nconst $0df3bbddebae522b$var$elMap = document.getElementById(\"map\");\nconst $0df3bbddebae522b$var$loginForm = document.querySelector(\"form.form--login\");\nconst $0df3bbddebae522b$var$logoutBtn = document.querySelector(\".nav__el--logout\");\nconst $0df3bbddebae522b$var$userPasswordForm = document.querySelector(\".form.form-user-password\");\nconst $0df3bbddebae522b$var$userDataForm = document.querySelector(\".form.form-user-data\");\nconst $0df3bbddebae522b$var$bookBtn = document.getElementById(\"book-tour\");\nconst $0df3bbddebae522b$var$signupForm = document.querySelector(\"form.form--signup\");\nif ($0df3bbddebae522b$var$elMap) {\n    const locations = JSON.parse($0df3bbddebae522b$var$elMap.dataset.locations);\n    const startLocation = JSON.parse($0df3bbddebae522b$var$elMap.dataset.startLocation);\n    const mapToken = $0df3bbddebae522b$var$elMap.dataset.mapToken;\n    (0, $71536770727dae28$export$4c5dd147b21b9176)(locations, startLocation, mapToken);\n}\nif ($0df3bbddebae522b$var$loginForm) $0df3bbddebae522b$var$loginForm.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    (0, $2ce254aeaf8bb0ff$export$596d806903d1f59e)(email, password);\n});\nif ($0df3bbddebae522b$var$signupForm) $0df3bbddebae522b$var$signupForm.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const name = document.getElementById(\"name\").value;\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    (0, $66cece3b701ac6a2$export$7200a869094fec36)(name, email, password, passwordConfirm);\n});\nif ($0df3bbddebae522b$var$logoutBtn) $0df3bbddebae522b$var$logoutBtn.addEventListener(\"click\", (0, $2ce254aeaf8bb0ff$export$a0973bcfe11b05c9));\nif ($0df3bbddebae522b$var$userDataForm) $0df3bbddebae522b$var$userDataForm.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const form = new FormData();\n    form.append(\"name\", document.getElementById(\"name\").value);\n    form.append(\"email\", document.getElementById(\"email\").value);\n    form.append(\"photo\", document.getElementById(\"photo\").files[0]);\n    (0, $743691a89873c7ad$export$f558026a994b6051)(form, \"data\");\n});\nif ($0df3bbddebae522b$var$userPasswordForm) $0df3bbddebae522b$var$userPasswordForm.addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\n    const currentPassword = document.getElementById(\"password-current\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    await (0, $743691a89873c7ad$export$f558026a994b6051)({\n        currentPassword: currentPassword,\n        password: password,\n        passwordConfirm: passwordConfirm\n    }, \"password\");\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\n    document.getElementById(\"password-current\").value = \"\";\n    document.getElementById(\"password\").value = \"\";\n    document.getElementById(\"password-confirm\").value = \"\";\n});\nif ($0df3bbddebae522b$var$bookBtn) $0df3bbddebae522b$var$bookBtn.addEventListener(\"click\", (e)=>{\n    e.target.textContent = \"Processing...\";\n    const { tourId: tourId } = e.target.dataset;\n    (0, $bb665e318ea0cb03$export$8d5bdbf26681c0c2)(tourId);\n});\n\n})();\n//# sourceMappingURL=index.js.map\n","/* eslint-disable */\r\nimport { login, logout } from './login';\r\nimport { updateSettings } from './updateSettings';\r\nimport { bookTour } from './stripe';\r\nimport { signup } from './signup';\r\nimport { displayMap } from './mapbox';\r\n\r\n//DOM elements\r\nconst elMap = document.getElementById('map');\r\nconst loginForm = document.querySelector('form.form--login');\r\nconst logoutBtn = document.querySelector('.nav__el--logout');\r\nconst userPasswordForm = document.querySelector('.form.form-user-password');\r\nconst userDataForm = document.querySelector('.form.form-user-data');\r\nconst bookBtn = document.getElementById('book-tour');\r\nconst signupForm = document.querySelector('form.form--signup');\r\n\r\nif (elMap) {\r\n  const locations = JSON.parse(elMap.dataset.locations);\r\n  const startLocation = JSON.parse(elMap.dataset.startLocation);\r\n  const mapToken = elMap.dataset.mapToken;\r\n  displayMap(locations, startLocation, mapToken);\r\n}\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n}\r\nif (signupForm) {\r\n  signupForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const name = document.getElementById('name').value;\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    signup(name, email, password, passwordConfirm);\r\n  });\r\n}\r\n\r\nif (logoutBtn) {\r\n  logoutBtn.addEventListener('click', logout);\r\n}\r\n\r\nif (userDataForm) {\r\n  userDataForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n\r\n    updateSettings(form, 'data');\r\n  });\r\n}\r\n\r\nif (userPasswordForm) {\r\n  userPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\r\n    const currentPassword = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    await updateSettings(\r\n      { currentPassword, password, passwordConfirm },\r\n      'password',\r\n    );\r\n\r\n    document.querySelector('.btn--save-password').textContent = 'Save password';\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n  });\r\n}\r\n\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', (e) => {\r\n    e.target.textContent = 'Processing...';\r\n    const { tourId } = e.target.dataset;\r\n    bookTour(tourId);\r\n  });\r\n}\r\n","/* eslint-disable */\r\nimport { showAlert } from './alerts';\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: '/api/v1/users/logout',\r\n    });\r\n    if (res.data.status === 'success') {\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', 'Error logging out! Try again!');\r\n  }\r\n};\r\n","/* eslint-disable */\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/* eslint-disable */\r\nimport { showAlert } from './alerts';\r\n\r\nexport const updateSettings = async (data, type) => {\r\n  try {\r\n    const url =\r\n      type === 'password'\r\n        ? '/api/v1/users/updateMyPassword'\r\n        : '/api/v1/users/updateMe';\r\n\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url,\r\n      data,\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `${type.toUpperCase()} updated succesfully!`);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n","/*eslint-disable */\r\nimport { showAlert } from './alerts';\r\n\r\nexport const bookTour = async (tourId) => {\r\n  try {\r\n    //1) Get checkout session from api\r\n    const session = await axios(\r\n      `/api/v1/bookings/checkout-session/${tourId}`,\r\n    );\r\n\r\n    //console.log(session);\r\n    //2) Create checkout form + charge credit card\r\n\r\n    window.location.replace(session.data.session.url);\r\n  } catch (err) {\r\n    showAlert('error', err);\r\n  }\r\n};\r\n","/*eslint-disable */\r\n\r\nimport { showAlert } from './alerts';\r\n\r\nexport const signup = async (name, email, password, passwordConfirm) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/signup',\r\n      data: {\r\n        name,\r\n        email,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Signed up successfully');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    if ((err.response.data.error.code = 11000)) {\r\n      const message = `${Object.keys(err.response.data.error.keyValue)} is already in use.`;\r\n      showAlert('error', message);\r\n    } else if ((err.response.data.error.name = 'ValidationError')) {\r\n      const errors = Object.values(err.response.data.error.errors).map(\r\n        (el) => el.message,\r\n      );\r\n      const message = `Invalid input data. ${errors.join('. ')}`;\r\n      showAlert('error', message);\r\n    } else showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n","/*eslint-disable*/\r\n\r\nexport const displayMap = (locations, startLocation, mapToken) => {\r\n  locations.push(startLocation);\r\n  mapboxgl.accessToken = mapToken;\r\n  var map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/alextonkov2004/cly05dy6g003a01qp56vu0fxt',\r\n    //center: [-118.155614, 33.976076],\r\n    //zoom: 1,\r\n    //interactive: true\r\n    scrollZoom: false,\r\n  });\r\n  map.on('style.load', () => {\r\n    map.setFog({});\r\n  });\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    const [lng, lat] = loc.coordinates;\r\n    //Create marker\r\n    const el = document.createElement('div');\r\n    loc.day === undefined\r\n      ? (el.className = 'marker-orange')\r\n      : (el.className = 'marker');\r\n    let paragraph;\r\n    loc.day === undefined\r\n      ? (paragraph = `<p>Start: ${loc.address}</p>`)\r\n      : (paragraph = `<p>Day ${loc.day}: ${loc.description}</p>`);\r\n\r\n    //Add Pop up\r\n    const popUp = new mapboxgl.Popup({\r\n      offset: 30,\r\n      closeButton: false,\r\n      closeOnClick: false,\r\n    }).setHTML(paragraph);\r\n\r\n    //Add marker\r\n    const marker = new mapboxgl.Marker({\r\n      element: el,\r\n      anchor: 'bottom',\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .setPopup(popUp)\r\n      .addTo(map);\r\n\r\n    const markerDiv = marker.getElement();\r\n    markerDiv.addEventListener('mouseenter', () => marker.togglePopup());\r\n    markerDiv.addEventListener('mouseleave', () => marker.togglePopup());\r\n    // Extends map bounds to include current location\r\n    bounds.extend([lng, lat]);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 200,\r\n      left: 100,\r\n      right: 100,\r\n    },\r\n  });\r\n};\r\n"],"names":["$9752b293a1a30209$export$516836c6a9dfc573","el","document","querySelector","parentElement","removeChild","$9752b293a1a30209$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","window","setTimeout","$2ce254aeaf8bb0ff$export$596d806903d1f59e","email","password","res","axios","method","url","data","status","location","assign","err","response","message","$2ce254aeaf8bb0ff$export$a0973bcfe11b05c9","$743691a89873c7ad$export$f558026a994b6051","toUpperCase","$bb665e318ea0cb03$export$8d5bdbf26681c0c2","tourId","session","replace","$66cece3b701ac6a2$export$7200a869094fec36","name","passwordConfirm","console","log","error","code","Object","keys","keyValue","$0df3bbddebae522b$var$elMap","getElementById","$0df3bbddebae522b$var$loginForm","$0df3bbddebae522b$var$logoutBtn","$0df3bbddebae522b$var$userPasswordForm","$0df3bbddebae522b$var$userDataForm","$0df3bbddebae522b$var$bookBtn","$0df3bbddebae522b$var$signupForm","locations","startLocation","mapToken","push","mapboxgl","accessToken","map","Map","container","style","scrollZoom","on","setFog","bounds","LngLatBounds","forEach","loc","paragraph","lng","lat","coordinates","createElement","undefined","day","className","address","description","popUp","Popup","offset","closeButton","closeOnClick","setHTML","marker","Marker","element","anchor","setLngLat","setPopup","addTo","markerDiv","getElement","addEventListener","togglePopup","extend","fitBounds","padding","top","bottom","left","right","JSON","parse","dataset","e","preventDefault","value","form","FormData","append","files","textContent","currentPassword","target","login","logout","updateSettings","bookTour","signup","displayMap","elMap","loginForm","logoutBtn","userPasswordForm","userDataForm","bookBtn","signupForm","showAlert","hideAlert","errors","values","join"],"version":3,"file":"index.js.map"}